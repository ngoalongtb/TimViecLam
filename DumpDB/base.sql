USE master
GO
CREATE DATABASE DbWebsiteViecLam
GO
--
USE DbWebsiteViecLam
-- BANG CHUYEN NGANH
CREATE TABLE ChuyenNganh(
	MaChuyenNganh INT PRIMARY KEY IDENTITY,
	TenNganh NVARCHAR(255)
)
GO
-- BANG TRINH DO
CREATE TABLE TrinhDo(
	MaTrinhDo INT PRIMARY KEY IDENTITY,
	TenTrinhDo NVARCHAR(255)
)
GO
-- BANG CHUNG CHI
CREATE TABLE ChungChi(
	MaChungChi INT PRIMARY KEY IDENTITY,
	TenChungChi NVARCHAR(255),
	NoiCap NVARCHAR(255)
)
GO
-- BANG LOAI TAI KHOAN
CREATE TABLE LoaiTaiKhoan(
	MaLoaiTaiKhoan INT PRIMARY KEY IDENTITY,
	TenLoaiTaiKhoan NVARCHAR(255)
)
GO
-- BANG TAI KHOAN
CREATE TABLE TaiKhoan(
	MaTaiKhoan INT PRIMARY KEY IDENTITY,
	Email VARCHAR(253),
	PassWord VARCHAR(100),
	MaLoaiTaiKhoan	INT
)
GO
-- BANG NHA TUYEN DUNG
CREATE TABLE NhaTuyenDung(
	MaNhaTuyenDung INT PRIMARY KEY IDENTITY,
	TenNhaTuyenDung NVARCHAR(255),
	DiaChi NVARCHAR(255),
	DienThoai VARCHAR(20),
	DiaChiWeb VARCHAR(253),
	GioiThieu NVARCHAR(255),
	HinhAnh VARCHAR(255),
	MaTaiKhoan INT
)
GO
-- BANG PHIEU DANG TUYEN
CREATE TABLE PhieuDangTuyen(
	MaPhieuDangTuyen INT PRIMARY KEY IDENTITY,
	MaNhaTuyenDung INT,
	MaChuyenNganh INT, 
	MaTrinhDo INT,
	MaChungChi INT,
	TieuDe  NVARCHAR(255),
	ViTriTuyenDung NVARCHAR(255),
	MoTaCV NVARCHAR(255),
	ThoiHanNopHoSo DATE,
	SoLuongTuyenDung INT,	
	NoiLamViec NVARCHAR(255),
	YeuCauKinhNghiem NVARCHAR(255),
	LuongKhoiDiem FLOAT
)
GO
-- BANG NGUOI TIM VIEC
CREATE TABLE NguoiTimViec(
	MaNguoiTimViec INT PRIMARY KEY IDENTITY,
	HoTen NVARCHAR(50),
	NgaySinh DATE,
	GioiTinh NVARCHAR(255),
	DiaChi NVARCHAR(255),
	DienThoai VARCHAR(20),
	HinhAnh VARCHAR(255),
	MaTaiKhoan INT
)
GO
-- BANG HO SO XIN VIEC
CREATE TABLE HoSoXinViec(
	MaHoSoXinViec INT PRIMARY KEY IDENTITY,
	MaNguoiTimViec INT,
	MaChuyenNganh INT,
	MaTrinhDo INT,
	MaChungChi INT,
	TieuDe NVARCHAR(255),
	KinhNghiem NVARCHAR(255),
	NguyenVongLamViec NVARCHAR(255),
	NoiLamViec NVARCHAR(255),
	LuongKhoiDiem FLOAT
)
GO

-- KHOA NGOAI

ALTER TABLE TaiKhoan
ADD FOREIGN KEY(MaLoaiTaiKhoan) REFERENCES LoaiTaiKhoan(MaLoaiTaiKhoan)
ON DELETE CASCADE
--
ALTER TABLE NhaTuyenDung
ADD FOREIGN KEY(MaTaiKhoan) REFERENCES TaiKhoan(MaTaiKhoan)
ON DELETE CASCADE
--
ALTER TABLE NguoiTimViec
ADD FOREIGN KEY(MaTaiKhoan) REFERENCES TaiKhoan(MaTaiKhoan)
ON DELETE CASCADE
--
ALTER TABLE PhieuDangTuyen
ADD FOREIGN KEY(MaNhaTuyenDung) REFERENCES NhaTuyenDung(MaNhaTuyenDung)
ON DELETE CASCADE
--
ALTER TABLE PhieuDangTuyen
ADD FOREIGN KEY(MaChuyenNganh) REFERENCES ChuyenNganh(MaChuyenNganh)
ON DELETE CASCADE
--
ALTER TABLE PhieuDangTuyen
ADD FOREIGN KEY(MaTrinhDo) REFERENCES TrinhDo(MaTrinhDo)
ON DELETE CASCADE
--
ALTER TABLE PhieuDangTuyen
ADD FOREIGN KEY(MaChungChi) REFERENCES ChungChi(MaChungChi)
ON DELETE CASCADE
--
--
ALTER TABLE HoSoXinViec
ADD FOREIGN KEY(MaNguoiTimViec) REFERENCES NguoiTimViec(MaNguoiTimViec)
ON DELETE CASCADE
--
ALTER TABLE HoSoXinViec
ADD FOREIGN KEY(MaChuyenNganh) REFERENCES ChuyenNganh(MaChuyenNganh)
ON DELETE CASCADE
--
ALTER TABLE HoSoXinViec
ADD FOREIGN KEY(MaTrinhDo) REFERENCES TrinhDo(MaTrinhDo)
ON DELETE CASCADE
--
ALTER TABLE HoSoXinViec
ADD FOREIGN KEY(MaChungChi) REFERENCES ChungChi(MaChungChi)
ON DELETE CASCADE
--